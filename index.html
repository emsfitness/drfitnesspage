<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>دكتور فيتنس EMS السويس</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(to bottom right, #f0f8ff, #e0ffe0);
      color: #333;
      text-align: center;
      animation: fadeIn 1s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    header {
      background: linear-gradient(to right, #03a9f4, #00c853);
      padding: 15px;
      color: white;
      position: relative;
      font-weight: bold;
      font-size: 1.2em;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
    }

    nav button {
      background: white;
      color: #03a9f4;
      border: 2px solid #03a9f4;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    nav button:hover {
      background: #03a9f4;
      color: white;
    }

    #adminIcon {
      position: absolute;
      left: 20px;
      top: 15px;
      cursor: pointer;
      font-size: 20px;
      background: white;
      color: #03a9f4;
      border-radius: 50%;
      padding: 8px;
      transition: 0.3s;
    }

    .section {
      padding: 30px;
    }

    .hidden { display: none; }

    .slide img {
      width: 60%;
      max-width: 500px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }

    .slide img:hover {
      transform: scale(1.05);
    }

    .slide h3 {
      font-size: 24px;
      margin-bottom: 10px;
      color: #2e7d32;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    input, textarea {
      padding: 8px;
      width: 90%;
      max-width: 400px;
      margin: 5px auto;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-family: inherit;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      background: #00c853;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background: #039b3b;
    }

    footer {
      padding: 20px;
      font-size: 14px;
      color: #777;
    }
  </style>
</head>
<body>

  <header>
    دكتور فيتنس EMS السويس
    <div id="adminIcon" onclick="showLogin()">👤</div>
    <nav>
      <button onclick="showSection('home')">الرئيسية</button>
      <button onclick="showSection('about')">من نحن</button>
      <button onclick="showSection('contact')">اتصل بنا</button>
    </nav>
  </header>

  <div id="home" class="section">
    <h2 id="homeText">مرحباً بكم في دكتور فيتنس EMS السويس</h2>
    <div id="slideContainer"></div>
  </div>

  <div id="about" class="section hidden">
    <h2>من نحن</h2>
    <p id="aboutText">نحن مركز متخصّص في تقنية EMS الحديثة للتمارين.</p>
  </div>

  <div id="contact" class="section hidden">
    <h2>اتصل بنا</h2>
    <p id="contactText">📞 0100000000 - 📍 السويس، شارع السلام</p>
    <textarea id="msgText" placeholder="اكتب رسالتك هنا"></textarea><br>
    <button onclick="sendMessage()">إرسال رسالة</button>
  </div>

  <!-- واجهة تسجيل دخول الأدمن -->
  <div id="adminLogin" class="section hidden">
    <h3>تسجيل دخول الأدمن</h3>
    <input id="username" placeholder="اسم المستخدم"><br>
    <input id="password" placeholder="كلمة المرور" type="password"><br>
    <button onclick="login()">دخول</button>
  </div>

  <!-- لوحة تحكم الأدمن -->
  <div id="adminPanel" class="section hidden">
    <h3>لوحة تحكم الأدمن</h3>
    <textarea id="homeInput" placeholder="نص الرئيسية"></textarea><br>
    <textarea id="aboutInput" placeholder="نص من نحن"></textarea><br>
    <textarea id="contactInput" placeholder="نص اتصل بنا"></textarea><br>
    <button onclick="updateTexts()">حفظ النصوص</button><br><br>

    <input type="file" id="imageUpload"><br>
    <input type="text" id="imageText" placeholder="نص فوق الصورة"><br>
    <button onclick="uploadImage()">رفع صورة</button><br><br>

    <button onclick="logout()">🚪 تسجيل الخروج</button>
  </div>

  <footer>© جميع الحقوق محفوظة لـ دكتور فيتنس EMS السويس</footer>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyACflgbzGWvr6EuHKwaPIWzzSJKfbw3Hd0",
      authDomain: "drfitness-page.firebaseapp.com",
      projectId: "drfitness-page",
      storageBucket: "drfitness-page.appspot.com",
      messagingSenderId: "821864673106",
      appId: "1:821864673106:web:70ce035e57517faaad548b",
      measurementId: "G-LQ6R9F7S2Z"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const storage = firebase.storage();

    function showSection(id) {
      document.querySelectorAll(".section").forEach(s => s.classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
    }

    function showLogin() {
      showSection("adminLogin");
    }

    function login() {
      const u = document.getElementById("username").value;
      const p = document.getElementById("password").value;
      if (u === "admin" && p === "1234") {
        showSection("adminPanel");
      } else {
        alert("بيانات خاطئة");
      }
    }

    function logout() {
      showSection("home");
    }

    async function updateTexts() {
      await db.ref("content/main").set({
        home: homeInput.value,
        about: aboutInput.value,
        contact: contactInput.value
      });
      alert("تم الحفظ");
      loadContent();
    }

    async function uploadImage() {
      const file = document.getElementById("imageUpload").files[0];
      const text = document.getElementById("imageText").value;
      if (!file || !text) return alert("اختر صورة وأدخل نص");

      const ref = storage.ref("slides/" + file.name);
      await ref.put(file);
      const url = await ref.getDownloadURL();
      const newRef = db.ref("slides").push();
      await newRef.set({ url, text });
      alert("تم الرفع");
      loadSlides();
    }

    async function sendMessage() {
      const msg = document.getElementById("msgText").value.trim();
      if (!msg) return alert("اكتب الرسالة أولاً");
      await db.ref("messages").push({ text: msg, time: Date.now() });
      alert("تم الإرسال");
      msgText.value = "";
    }

    async function loadContent() {
      const snap = await db.ref("content/main").get();
      if (snap.exists()) {
        const data = snap.val();
        homeText.innerText = data.home || homeText.innerText;
        aboutText.innerText = data.about || aboutText.innerText;
        contactText.innerText = data.contact || contactText.innerText;
      }
    }

    async function loadSlides() {
      slideContainer.innerHTML = "";
      const snap = await db.ref("slides").get();
      if (snap.exists()) {
        const data = snap.val();
        Object.values(data).forEach(d => {
          const slide = document.createElement("div");
          slide.className = "slide";
          slide.innerHTML = `<h3>${d.text}</h3><img src="${d.url}" alt="صورة">`;
          slideContainer.appendChild(slide);
        });
      }
    }

    window.onload = () => {
      loadContent();
      loadSlides();
    };
  </script>
</body>
</html>
