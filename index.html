<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>دكتور فيتنس EMS السويس</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700;900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      background: linear-gradient(to bottom right, #141e30, #243b55);
      color: white;
      overflow-x: hidden;
    }
    header {
      background-color: #111;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    nav a {
      color: white;
      margin: 0 15px;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      color: #ffd700;
    }
    .admin-icon {
      font-size: 24px;
      cursor: pointer;
    }
    .main-content {
      text-align: center;
      padding: 40px 10px;
    }
    .main-content h1 {
      font-size: 30px;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px #000;
    }
    .slide {
      margin-bottom: 20px;
    }
    .slide h3 {
      font-size: 22px;
      margin-bottom: 10px;
    }
    .slide img {
      width: 80%;
      max-width: 600px;
      border-radius: 10px;
      box-shadow: 0 0 10px #000;
    }
    .hidden {
      display: none;
    }
    .section {
      padding: 20px;
      background: rgba(0,0,0,0.3);
      margin: 20px;
      border-radius: 10px;
    }
    textarea, input[type="text"], input[type="password"] {
      width: 90%;
      padding: 10px;
      margin: 5px 0;
      font-size: 16px;
      border-radius: 5px;
    }
    input[type="file"] {
      margin: 10px 0;
    }
    button {
      background: #ffd700;
      color: black;
      padding: 10px 20px;
      margin: 5px;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #ffb700;
    }
    footer {
      background: #111;
      color: #ccc;
      text-align: center;
      padding: 10px;
    }
  </style>
</head>
<body>

<header>
  <div class="admin-icon" onclick="showLogin()">🔒</div>
  <nav>
    <a href="#" onclick="showSection('about')">من نحن</a>
    <a href="#" onclick="showSection('contact')">اتصل بنا</a>
    <a href="#" onclick="showSection('message')">📧 أرسل رسالة</a>
  </nav>
</header>

<div class="main-content" id="home">
  <h1 id="homeText">مرحبًا بكم في دكتور فيتنس EMS السويس</h1>
  <div id="slideContainer"></div>
</div>

<div id="about" class="section hidden">
  <h2>من نحن</h2>
  <p id="aboutText">مركز رياضي متخصص في تقنية EMS.</p>
</div>

<div id="contact" class="section hidden">
  <h2>اتصل بنا</h2>
  <p id="contactText">الهاتف: 01000000000<br>العنوان: السويس</p>
</div>

<div id="message" class="section hidden">
  <h2>📩 أرسل رسالة</h2>
  <textarea id="msgText" placeholder="اكتب رسالتك هنا"></textarea><br>
  <button onclick="sendMessage()">إرسال</button>
</div>

<div id="adminPanel" class="section hidden">
  <h2>لوحة تحكم الأدمن</h2>
  <button onclick="logout()">تسجيل الخروج</button>
  <h3>تحديث النصوص:</h3>
  <textarea id="homeInput" placeholder="نص الواجهة الرئيسية"></textarea>
  <textarea id="aboutInput" placeholder="من نحن"></textarea>
  <textarea id="contactInput" placeholder="اتصل بنا"></textarea><br>
  <button onclick="updateTexts()">حفظ التعديلات</button>

  <h3>رفع صورة + نص:</h3>
  <input type="file" id="imageUpload"><br>
  <input type="text" id="imageText" placeholder="نص مرفق للصورة">
  <button onclick="uploadImage()">رفع</button>
</div>

<div id="loginForm" class="section hidden">
  <h2>دخول الأدمن</h2>
  <input type="text" id="username" placeholder="اسم المستخدم"><br>
  <input type="password" id="password" placeholder="كلمة المرور"><br>
  <button onclick="login()">دخول</button>
</div>

<footer>جميع الحقوق محفوظة © دكتور فيتنس EMS السويس</footer>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyACflgbzGWvr6EuHKwaPIWzzSJKfbw3Hd0",
    authDomain: "drfitness-page.firebaseapp.com",
    projectId: "drfitness-page",
    storageBucket: "drfitness-page.appspot.com",
    messagingSenderId: "821864673106",
    appId: "1:821864673106:web:70ce035e57517faaad548b",
    measurementId: "G-LQ6R9F7S2Z"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const storage = firebase.storage();

  const homeText = document.getElementById("homeText");
  const aboutText = document.getElementById("aboutText");
  const contactText = document.getElementById("contactText");
  const slideContainer = document.getElementById("slideContainer");

  function showSection(id) {
    document.querySelectorAll('.section').forEach(sec => sec.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
  }

  function showLogin() {
    showSection("loginForm");
  }

  function login() {
    if (username.value === "admin" && password.value === "1234") {
      document.getElementById("adminPanel").classList.remove("hidden");
      document.getElementById("loginForm").classList.add("hidden");
    } else {
      alert("بيانات غير صحيحة");
    }
  }

  function logout() {
    document.getElementById("adminPanel").classList.add("hidden");
  }

  async function updateTexts() {
    await db.collection("content").doc("main").set({
      home: homeInput.value,
      about: aboutInput.value,
      contact: contactInput.value
    });
    alert("تم حفظ النصوص");
    loadContent();
  }

  async function uploadImage() {
    const file = document.getElementById("imageUpload").files[0];
    const text = document.getElementById("imageText").value;
    if (!file || !text) return alert("يرجى اختيار صورة وكتابة نص");

    const ref = storage.ref("slides/" + file.name);
    await ref.put(file);
    const url = await ref.getDownloadURL();
    await db.collection("slides").add({ url, text });
    alert("تم الرفع");
    loadSlides();
  }

  async function sendMessage() {
    const msg = document.getElementById("msgText").value.trim();
    if (!msg) return alert("اكتب الرسالة أولاً");
    await db.collection("messages").add({ text: msg, time: new Date() });
    alert("تم الإرسال");
    msgText.value = "";
  }

  async function loadContent() {
    const doc = await db.collection("content").doc("main").get();
    if (doc.exists) {
      const data = doc.data();
      homeText.innerText = data.home || homeText.innerText;
      aboutText.innerText = data.about || aboutText.innerText;
      contactText.innerHTML = data.contact || contactText.innerHTML;
    }
  }

  async function loadSlides() {
    slideContainer.innerHTML = "";
    const snap = await db.collection("slides").get();
    snap.forEach(doc => {
      const d = doc.data();
      const slide = document.createElement("div");
      slide.className = "slide";
      slide.innerHTML = `<h3>${d.text}</h3><img src="${d.url}" alt="صورة">`;
      slideContainer.appendChild(slide);
    });
  }

  window.onload = () => {
    loadContent();
    loadSlides();
  };
</script>

</body>
</html>
