<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø¯ÙƒØªÙˆØ± ÙÙŠØªÙ†Ø³ EMS Ø§Ù„Ø³ÙˆÙŠØ³</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(to bottom right, #f0f8ff, #e0ffe0);
      color: #333;
      text-align: center;
      animation: fadeIn 1s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    header {
      background: linear-gradient(to right, #03a9f4, #00c853);
      padding: 15px;
      color: white;
      position: relative;
      font-weight: bold;
      font-size: 1.2em;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
    }

    nav button {
      background: white;
      color: #03a9f4;
      border: 2px solid #03a9f4;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    nav button:hover {
      background: #03a9f4;
      color: white;
    }

    #adminIcon {
      position: absolute;
      left: 20px;
      top: 15px;
      cursor: pointer;
      font-size: 20px;
      background: white;
      color: #03a9f4;
      border-radius: 50%;
      padding: 8px;
      transition: 0.3s;
    }

    .section {
      padding: 30px;
    }

    .hidden { display: none; }

    .slide img {
      width: 60%;
      max-width: 500px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }

    .slide img:hover {
      transform: scale(1.05);
    }

    .slide h3 {
      font-size: 24px;
      margin-bottom: 10px;
      color: #2e7d32;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    input, textarea {
      padding: 8px;
      width: 90%;
      max-width: 400px;
      margin: 5px auto;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-family: inherit;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      background: #00c853;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background: #039b3b;
    }

    footer {
      padding: 20px;
      font-size: 14px;
      color: #777;
    }
  </style>
</head>
<body>

  <header>
    Ø¯ÙƒØªÙˆØ± ÙÙŠØªÙ†Ø³ EMS Ø§Ù„Ø³ÙˆÙŠØ³
    <div id="adminIcon" onclick="showLogin()">ğŸ‘¤</div>
    <nav>
      <button onclick="showSection('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
      <button onclick="showSection('about')">Ù…Ù† Ù†Ø­Ù†</button>
      <button onclick="showSection('contact')">Ø§ØªØµÙ„ Ø¨Ù†Ø§</button>
    </nav>
  </header>

  <div id="home" class="section">
    <h2 id="homeText">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø¯ÙƒØªÙˆØ± ÙÙŠØªÙ†Ø³ EMS Ø§Ù„Ø³ÙˆÙŠØ³</h2>
    <div id="slideContainer"></div>
  </div>

  <div id="about" class="section hidden">
    <h2>Ù…Ù† Ù†Ø­Ù†</h2>
    <p id="aboutText">Ù†Ø­Ù† Ù…Ø±ÙƒØ² Ù…ØªØ®ØµÙ‘Øµ ÙÙŠ ØªÙ‚Ù†ÙŠØ© EMS Ø§Ù„Ø­Ø¯ÙŠØ«Ø© Ù„Ù„ØªÙ…Ø§Ø±ÙŠÙ†.</p>
  </div>

  <div id="contact" class="section hidden">
    <h2>Ø§ØªØµÙ„ Ø¨Ù†Ø§</h2>
    <p id="contactText">ğŸ“ 0100000000 - ğŸ“ Ø§Ù„Ø³ÙˆÙŠØ³ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…</p>
    <textarea id="msgText" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§"></textarea><br>
    <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©</button>
  </div>

  <!-- ÙˆØ§Ø¬Ù‡Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù† -->
  <div id="adminLogin" class="section hidden">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
    <input id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
    <input id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" type="password"><br>
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  </div>

  <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù† -->
  <div id="adminPanel" class="section hidden">
    <h3>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
    <textarea id="homeInput" placeholder="Ù†Øµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"></textarea><br>
    <textarea id="aboutInput" placeholder="Ù†Øµ Ù…Ù† Ù†Ø­Ù†"></textarea><br>
    <textarea id="contactInput" placeholder="Ù†Øµ Ø§ØªØµÙ„ Ø¨Ù†Ø§"></textarea><br>
    <button onclick="updateTexts()">Ø­ÙØ¸ Ø§Ù„Ù†ØµÙˆØµ</button><br><br>

    <input type="file" id="imageUpload"><br>
    <input type="text" id="imageText" placeholder="Ù†Øµ ÙÙˆÙ‚ Ø§Ù„ØµÙˆØ±Ø©"><br>
    <button onclick="uploadImage()">Ø±ÙØ¹ ØµÙˆØ±Ø©</button><br><br>

    <button onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </div>

  <footer>Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù€ Ø¯ÙƒØªÙˆØ± ÙÙŠØªÙ†Ø³ EMS Ø§Ù„Ø³ÙˆÙŠØ³</footer>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyACflgbzGWvr6EuHKwaPIWzzSJKfbw3Hd0",
      authDomain: "drfitness-page.firebaseapp.com",
      projectId: "drfitness-page",
      storageBucket: "drfitness-page.appspot.com",
      messagingSenderId: "821864673106",
      appId: "1:821864673106:web:70ce035e57517faaad548b",
      measurementId: "G-LQ6R9F7S2Z"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const storage = firebase.storage();

    function showSection(id) {
      document.querySelectorAll(".section").forEach(s => s.classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
    }

    function showLogin() {
      showSection("adminLogin");
    }

    function login() {
      const u = document.getElementById("username").value;
      const p = document.getElementById("password").value;
      if (u === "admin" && p === "1234") {
        showSection("adminPanel");
      } else {
        alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");
      }
    }

    function logout() {
      showSection("home");
    }

    async function updateTexts() {
      await db.ref("content/main").set({
        home: homeInput.value,
        about: aboutInput.value,
        contact: contactInput.value
      });
      alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
      loadContent();
    }

    async function uploadImage() {
      const file = document.getElementById("imageUpload").files[0];
      const text = document.getElementById("imageText").value;
      if (!file || !text) return alert("Ø§Ø®ØªØ± ØµÙˆØ±Ø© ÙˆØ£Ø¯Ø®Ù„ Ù†Øµ");

      const ref = storage.ref("slides/" + file.name);
      await ref.put(file);
      const url = await ref.getDownloadURL();
      const newRef = db.ref("slides").push();
      await newRef.set({ url, text });
      alert("ØªÙ… Ø§Ù„Ø±ÙØ¹");
      loadSlides();
    }

    async function sendMessage() {
      const msg = document.getElementById("msgText").value.trim();
      if (!msg) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø£ÙˆÙ„Ø§Ù‹");
      await db.ref("messages").push({ text: msg, time: Date.now() });
      alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
      msgText.value = "";
    }

    async function loadContent() {
      const snap = await db.ref("content/main").get();
      if (snap.exists()) {
        const data = snap.val();
        homeText.innerText = data.home || homeText.innerText;
        aboutText.innerText = data.about || aboutText.innerText;
        contactText.innerText = data.contact || contactText.innerText;
      }
    }

    async function loadSlides() {
      slideContainer.innerHTML = "";
      const snap = await db.ref("slides").get();
      if (snap.exists()) {
        const data = snap.val();
        Object.values(data).forEach(d => {
          const slide = document.createElement("div");
          slide.className = "slide";
          slide.innerHTML = `<h3>${d.text}</h3><img src="${d.url}" alt="ØµÙˆØ±Ø©">`;
          slideContainer.appendChild(slide);
        });
      }
    }

    window.onload = () => {
      loadContent();
      loadSlides();
    };
  </script>
</body>
</html>
