<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¯ÙƒØªÙˆØ± ÙÙŠØªÙ†Ø³ EMS Ø§Ù„Ø³ÙˆÙŠØ³</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700;900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      background: linear-gradient(to bottom right, #141e30, #243b55);
      color: white;
      overflow-x: hidden;
    }
    header {
      background-color: #111;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    nav a {
      color: white;
      margin: 0 15px;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      color: #ffd700;
    }
    .admin-icon {
      font-size: 24px;
      cursor: pointer;
    }
    .main-content {
      text-align: center;
      padding: 40px 10px;
    }
    .main-content h1 {
      font-size: 30px;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px #000;
    }
    .slide {
      margin-bottom: 20px;
    }
    .slide h3 {
      font-size: 22px;
      margin-bottom: 10px;
    }
    .slide img {
      width: 80%;
      max-width: 600px;
      border-radius: 10px;
      box-shadow: 0 0 10px #000;
    }
    .hidden {
      display: none;
    }
    .section {
      padding: 20px;
      background: rgba(0,0,0,0.3);
      margin: 20px;
      border-radius: 10px;
    }
    textarea, input[type="text"], input[type="password"] {
      width: 90%;
      padding: 10px;
      margin: 5px 0;
      font-size: 16px;
      border-radius: 5px;
    }
    input[type="file"] {
      margin: 10px 0;
    }
    button {
      background: #ffd700;
      color: black;
      padding: 10px 20px;
      margin: 5px;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #ffb700;
    }
    footer {
      background: #111;
      color: #ccc;
      text-align: center;
      padding: 10px;
    }
  </style>
</head>
<body>

<header>
  <div class="admin-icon" onclick="showLogin()">ğŸ”’</div>
  <nav>
    <a href="#" onclick="showSection('about')">Ù…Ù† Ù†Ø­Ù†</a>
    <a href="#" onclick="showSection('contact')">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
    <a href="#" onclick="showSection('message')">ğŸ“§ Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø©</a>
  </nav>
</header>

<div class="main-content" id="home">
  <h1 id="homeText">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ÙÙŠ Ø¯ÙƒØªÙˆØ± ÙÙŠØªÙ†Ø³ EMS Ø§Ù„Ø³ÙˆÙŠØ³</h1>
  <div id="slideContainer"></div>
</div>

<div id="about" class="section hidden">
  <h2>Ù…Ù† Ù†Ø­Ù†</h2>
  <p id="aboutText">Ù…Ø±ÙƒØ² Ø±ÙŠØ§Ø¶ÙŠ Ù…ØªØ®ØµØµ ÙÙŠ ØªÙ‚Ù†ÙŠØ© EMS.</p>
</div>

<div id="contact" class="section hidden">
  <h2>Ø§ØªØµÙ„ Ø¨Ù†Ø§</h2>
  <p id="contactText">Ø§Ù„Ù‡Ø§ØªÙ: 01000000000<br>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: Ø§Ù„Ø³ÙˆÙŠØ³</p>
</div>

<div id="message" class="section hidden">
  <h2>ğŸ“© Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø©</h2>
  <textarea id="msgText" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§"></textarea><br>
  <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<div id="adminPanel" class="section hidden">
  <h2>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
  <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  <h3>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ:</h3>
  <textarea id="homeInput" placeholder="Ù†Øµ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"></textarea>
  <textarea id="aboutInput" placeholder="Ù…Ù† Ù†Ø­Ù†"></textarea>
  <textarea id="contactInput" placeholder="Ø§ØªØµÙ„ Ø¨Ù†Ø§"></textarea><br>
  <button onclick="updateTexts()">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>

  <h3>Ø±ÙØ¹ ØµÙˆØ±Ø© + Ù†Øµ:</h3>
  <input type="file" id="imageUpload"><br>
  <input type="text" id="imageText" placeholder="Ù†Øµ Ù…Ø±ÙÙ‚ Ù„Ù„ØµÙˆØ±Ø©">
  <button onclick="uploadImage()">Ø±ÙØ¹</button>
</div>

<div id="loginForm" class="section hidden">
  <h2>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
  <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
  <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"><br>
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ø¯ÙƒØªÙˆØ± ÙÙŠØªÙ†Ø³ EMS Ø§Ù„Ø³ÙˆÙŠØ³</footer>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyACflgbzGWvr6EuHKwaPIWzzSJKfbw3Hd0",
    authDomain: "drfitness-page.firebaseapp.com",
    projectId: "drfitness-page",
    storageBucket: "drfitness-page.appspot.com",
    messagingSenderId: "821864673106",
    appId: "1:821864673106:web:70ce035e57517faaad548b",
    measurementId: "G-LQ6R9F7S2Z"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const storage = firebase.storage();

  const homeText = document.getElementById("homeText");
  const aboutText = document.getElementById("aboutText");
  const contactText = document.getElementById("contactText");
  const slideContainer = document.getElementById("slideContainer");

  function showSection(id) {
    document.querySelectorAll('.section').forEach(sec => sec.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
  }

  function showLogin() {
    showSection("loginForm");
  }

  function login() {
    if (username.value === "admin" && password.value === "1234") {
      document.getElementById("adminPanel").classList.remove("hidden");
      document.getElementById("loginForm").classList.add("hidden");
    } else {
      alert("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
    }
  }

  function logout() {
    document.getElementById("adminPanel").classList.add("hidden");
  }

  async function updateTexts() {
    await db.collection("content").doc("main").set({
      home: homeInput.value,
      about: aboutInput.value,
      contact: contactInput.value
    });
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØµÙˆØµ");
    loadContent();
  }

  async function uploadImage() {
    const file = document.getElementById("imageUpload").files[0];
    const text = document.getElementById("imageText").value;
    if (!file || !text) return alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙˆÙƒØªØ§Ø¨Ø© Ù†Øµ");

    const ref = storage.ref("slides/" + file.name);
    await ref.put(file);
    const url = await ref.getDownloadURL();
    await db.collection("slides").add({ url, text });
    alert("ØªÙ… Ø§Ù„Ø±ÙØ¹");
    loadSlides();
  }

  async function sendMessage() {
    const msg = document.getElementById("msgText").value.trim();
    if (!msg) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø£ÙˆÙ„Ø§Ù‹");
    await db.collection("messages").add({ text: msg, time: new Date() });
    alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    msgText.value = "";
  }

  async function loadContent() {
    const doc = await db.collection("content").doc("main").get();
    if (doc.exists) {
      const data = doc.data();
      homeText.innerText = data.home || homeText.innerText;
      aboutText.innerText = data.about || aboutText.innerText;
      contactText.innerHTML = data.contact || contactText.innerHTML;
    }
  }

  async function loadSlides() {
    slideContainer.innerHTML = "";
    const snap = await db.collection("slides").get();
    snap.forEach(doc => {
      const d = doc.data();
      const slide = document.createElement("div");
      slide.className = "slide";
      slide.innerHTML = `<h3>${d.text}</h3><img src="${d.url}" alt="ØµÙˆØ±Ø©">`;
      slideContainer.appendChild(slide);
    });
  }

  window.onload = () => {
    loadContent();
    loadSlides();
  };
</script>

</body>
</html>
